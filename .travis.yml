language: python
python:
  - '2.7.6'
  - '2.7.12'
addons:
  apt_packages:
    - pandoc
services:
  - mongodb
install:
  - pip install -U pip
  - pip install -r requirements.txt -U --no-build-isolation
  - pip install --ignore-installed -U -r requirements/prod.txt
before_script:
  - mv mysite/mysite/settings/local_example.py mysite/mysite/settings/local.py
  - mv fab_settings.py.example fab_settings.py
  - wget http://geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz
  - gunzip GeoLiteCity.dat.gz
  - mv GeoLiteCity.dat mysite/GeoLiteCityLocal.dat
script:
  - cd mysite
  - export DJANGO_SETTINGS_MODULE=mysite.settings.test_localhost && pytest
after_success:
  - coveralls
  - codecov
sudo: false
