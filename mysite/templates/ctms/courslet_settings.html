{% extends "ctms_base.html" %}

{% block content %}
  <div class="card">
    <header class="card__topbar">
      <h1>{{ courslet.unit.title }}</h1>
    </header>

    <nav class="card__nav">
      <ul>
        <li>
          <a href="{% url 'ctms:courslet_view' course_pk=course_pk pk=pk %}">Threads</a>
        </li>

        {% if u_lessons %}
        <li>
          <a href="{% url 'ctms:courselet_preview' course_pk=course_pk pk=pk %}" target="_blank">Preview</a>
        </li>
        {% else %}
        <li>
          <a href="#">Preview</a>
        </li>
        {% endif %}

        <li>
          <a href="{% url 'ctms:courselet_invite' pk=course_pk courselet_pk=pk %}" class="">Share</a>
        </li>

        <li>
          <a href="{% url 'ctms:courslet_settings' course_pk=course_pk pk=pk %}" class="card__nav-active">Settings</a>
        </li>
      </ul>
    </nav>

    <main class="card__content">
      <div class="form-group">
        <label>Publish Settings</label>
        <p>
          {% if courslet.releaseTime %}
            Your courselet is published. Click on the button below if you want to unpublish it.
          {% else %}
            Your courselet has not been published yet. Click on the button below to publish it.
          {% endif %}
        </p>

        <div class="form-group__action">
          {% include 'ctms/includes/publish-unpublish-button.html' with courselet_pk=pk course_pk=course_pk courselet=courslet %}
        </div>
      </div>

      <form class="form" action="{% url 'ctms:courslet_settings' course_pk=course_pk pk=pk %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="form-group form-group--not-first">
          <label for="name">Courselet Name</label>
          <p>You can change the name of your courselet here.</p>
          {{ form.title }}
          <label for="{{ form.practice_questions.auto_id }}">Upload practice questions doc/pdf</label>
          {{ form.practice_questions }}
          {% if form.practice_questions.errors %}
            {{ form.practice_questions.errors }}
          {% endif %}
        <label for="{{ form.best_practice_type.auto_id }}">Best practice type</label>
          {{ form.best_practice_type }}
          {% if form.best_practice_type.errors %}
            {{ form.best_practice_type.errors }}
          {% endif %}
        <label for="{{ form.assessment_name.auto_id }}">Assessment name</label>
          {{ form.assessment_name }}
          {% if form.assessment_name.errors %}
            {{ form.assessment_name.errors }}
          {% endif %}
        <label for="{{ form.follow_up_assessment_date.auto_id }}">Follow-up assessment date</label>
          {{ form.follow_up_assessment_date }}
          {% if form.follow_up_assessment_date.errors %}
            {{ form.follow_up_assessment_date.errors }}
          {% endif %}
        <label for="{{ form.follow_up_aassessment_grade.auto_id }}">Follow-up assessment grade</label>
          {{ form.follow_up_assessment_grade }}
          {% if form.follow_up_assessment_grade.errors %}
            {{ form.follow_up_assessment_grade.errors }}
          {% endif %}
        <label for="{{ form.follow_up_aassessment_grade.auto_id }}">Courselet deadline (days before follow-up assessment)</label>
          {{ form.deadline }}
          {% if form.deadline.errors %}
            {{ form.deadline.errors }}
          {% endif %}
        <label for="{{ form.follow_up_aassessment_grade.auto_id }}">Courselet duration (days)</label>
          {{ form.durations }}
          {% if form.durations.errors %}
            {{ form.durations.errors }}
          {% endif %}
        <label for="{{ form.participation_credit.auto_id }}">Courselet participation credit (grade %)</label>
          {{ form.participation_credit }}
          {% if form.participation_credit.errors %}
            {{ form.participation_credit.errors }}
          {% endif %}
        </div>

        <br>
        <div style="float: left">
          {{ form.is_show_will_learn }}
        </div>
        <div style="margin-left: 1%; float: left">
          Show Concepts in the Chat start page?
        </div>
        <!-- TODO: Replace label, description and input with real form
          {{ form.as_p }}
        -->

        <input type="submit" value="Save">
      </form>

      <form action="{% url 'ctms:courslet_delete' course_pk=course_pk pk=pk %}" class="card__delete" method="post">
        {% csrf_token %}

        <input type="submit" value="Remove Courselet" class="button button--delete" data-confirm-text="Do you really want to remove this courselet?">
      </form>
    </main>
  </div>
  </div>
  </div>
<style>
  input.button-primary {
    margin-top: -48px !important;
    margin-right: 160px !important;
  }
</style>
{% endblock %}
