{% extends "ctms_base.html" %}

{% block content %}
  <div class="card">
    <header class="card__topbar">
      <h1>{{ courslet.unit.title }}</h1>
    </header>

    <nav class="card__nav">
      <ul>
        <li>
          <a href="{% url 'ctms:courslet_view' course_pk=course_pk pk=pk %}">Threads</a>
        </li>

        {% if u_lessons %}
        <li>
          <a href="{% url 'ctms:courselet_preview' course_pk=course_pk pk=pk %}" target="_blank">Preview</a>
        </li>
        {% else %}
        <li>
          <a href="#">Preview</a>
        </li>
        {% endif %}

        <li>
          <a href="{% url 'ctms:courselet_invite' pk=course_pk courselet_pk=pk %}" class="">Share</a>
        </li>

        <li>
          <a href="{% url 'ctms:courslet_settings' course_pk=course_pk pk=pk %}" class="card__nav-active">Settings</a>
        </li>
      </ul>
    </nav>

    <main class="card__content">
      <div class="form-group">
        <label>Publish Settings</label>
        <p>
          {% if courslet.releaseTime %}
            Your courselet is published. Click on the button below if you want to unpublish it.
          {% else %}
            Your courselet has not been published yet. Click on the button below to publish it.
          {% endif %}
        </p>

        <div class="form-group__action">
          {% include 'ctms/includes/publish-unpublish-button.html' with courselet_pk=pk course_pk=course_pk courselet=courslet %}
        </div>
      </div>

      <form class="form" action="{% url 'ctms:courslet_settings' course_pk=course_pk pk=pk %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="form-group form-group--not-first">
          <label for="name">Courselet Name</label>
          <p>You can change the name of your courselet here.</p>
          {{ form.title }}
        <label for="{{ form.exam_name.auto_id }}">Exam name</label>
        <p>Store as graded assessment name</p>
          {{ form.exam_name }}
          {% if form.exam_name.errors %}
            {{ form.exam_name.errors }}
          {% endif %}
        <label for="{{ form.follow_up_assessment_date.auto_id }}">Follow-up assessment date</label>
          {{ form.follow_up_assessment_date }}
          {% if form.follow_up_assessment_date.errors %}
            {{ form.follow_up_assessment_date.errors }}
          {% endif %}
        <label for="{{ form.follow_up_aassessment_grade.auto_id }}">Follow-up assessment grade</label>
          {{ form.follow_up_assessment_grade }}
          {% if form.follow_up_assessment_grade.errors %}
            {{ form.follow_up_assessment_grade.errors }}
          {% endif %}
        <label for="{{ form.question_parts.auto_id }}">Question parts</label>
          {{ form.question_parts }}
          {% if form.question_parts.errors %}
            {{ form.question_parts.errors }}
          {% endif %}
        <label for="{{ form.average_score.auto_id }}">Average score</label>
          {{ form.average_score }}
          {% if form.average_score.errors %}
            {{ form.average_score.errors }}
          {% endif %}
        <label for="{{ form.graded_assessment_value.auto_id }}">Total grade % for the paired (graded) assessment</label>
          {{ form.graded_assessment_value }}
          {% if form.graded_assessment_value.errors %}
            {{ form.graded_assessment_value.errors }}
          {% endif %}
        <label for="{{ form.courselet_days.auto_id }}">Number of days students are given to complete the courselet</label>
          {{ form.courselet_days }}
          {% if form.courselet_days.errors %}
          {{ form.courselet_days.errors }}
          {% endif %}
        <label for="{{ form.error_resolution_days.auto_id }}">Number of days between courselet deadline and paired (graded) assessment</label>
            {{ form.error_resolution_days }}
            {% if form.error_resolution_days.errors %}
              {{ form.error_resolution_days.errors }}
            {% endif %}
        <label for="{{ form.courselet_completion_credit.auto_id }}">Courselet duration (days)</label>
            {{ form.courselet_completion_credit }}
            {% if form.courselet_completion_credit.errors %}
            {{ form.courselet_completion_credit.errors }}
            {% endif %}
        </div>

        <br>
        <div style="float: left">
          {{ form.is_show_will_learn }}
        </div>
        <div style="margin-left: 1%; float: left">
          Show Concepts in the Chat start page?
        </div>
        <!-- TODO: Replace label, description and input with real form
          {{ form.as_p }}
        -->

        <input type="submit" value="Save">
      </form>

      <form action="{% url 'ctms:courslet_delete' course_pk=course_pk pk=pk %}" class="card__delete" method="post">
        {% csrf_token %}

        <input type="submit" value="Remove Courselet" class="button button--delete" data-confirm-text="Do you really want to remove this courselet?">
      </form>
    </main>
  </div>
  </div>
  </div>
<style>
  input.button-primary {
    margin-top: -48px !important;
    margin-right: 160px !important;
  }
</style>
{% endblock %}
